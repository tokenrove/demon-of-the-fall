
DEMON OF THE FALL
Copyright 2004 Julian Squires and Matthew Riche


STATUS

Right now, I suppose it all qualifies as a crude hack -- there's a lot
of refactoring to be done.  This originally used CL-SDL, but I
switched to my own minimal implementation of functions in C due to an
insane number of FFI-related hassles I was having, particularly to do
with efficiency.

Generally, to try it out, you should:
% (cd game-fetus-alpha && make)
Fire up your lisp of choice, from the base directory, and:
> (asdf:oos 'asdf:compile-op :demon-of-the-fall)
> (asdf:oos 'asdf:load-op :demon-of-the-fall)
> (in-package :demon)
> (first-init)
> (in-game-loop :test-room-a)
... should bring you to a test room where you can mess around.

You should also be able to:
> (equinox:room-editor :test-room-a)


Status of support for various lisp implementations:

* OpenMCL -- definitely the fastest (perfect framerate, no GC pauses),
but pretty horrible for debugging.  Should work fine for normal use,
though.

* CMUCL on Linux/x86 -- lots of GC pauses at the moment, but should be
the most stable, as it is the platform on which most development is
done.

* SBCL on Linux/PPC -- one of my standard development platforms.
Wretched GC pauses.

* SBCL on Linux/x86 -- strangely, much more recalcitrant than SBCL on
PPC.  I have to get around to fixing the FFI issues with this before
it will be usable.

* CLISP on Linux/{x86,PPC}, hopefully also Win32 -- once I figure out
the FFI here, I will try to have this running; currently it's a no-go
due to lack of UFFI support.


DATA FILES

Anything in ret-data/ is (effectively) created by Retsyn.
Anything in other-data/ has been obtained from other sources, as
placeholders, and must be removed before the game is released.


CAVEATS TO LEVEL DESIGNERS

* Places where there are no floor tiles cannot be crossed by the
player, even if there are other things above the floor.  Use an
invisible floor tile or similar instead.

* You can put a big tile (like a hedge or block) in the floor, but it
will always have the clip rectangle of a floor tile, and it won't
animate.


MODULES

game-fetus-alpha
	Simple 2D game toolkit library; hopefully will see use outside
	of this project.

aequus-noctis
	Engine for Equinox-style isometric games.

demon-of-the-fall
	Scenario-specific code and data.


REFACTORINGS:

Lots of stuff should be more data driven:
	event handling in editors.

Reduce duplication of code:
	collision detection/resolution.

Fix comments, function documentation, and document any assumptions.

Physical structure of the code needs to be rearranged to better
reflect dependencies, so that initial load of the code doesn't have so
many warnings.
